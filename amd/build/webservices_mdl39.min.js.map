{"version":3,"file":"webservices_mdl39.min.js","sources":["../src/webservices_mdl39.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Webservices actions for Moodle >=3.9 && <4.3.\r\n *\r\n * @module     local_wsmanager/webservices_mdl402\r\n * @copyright  2024 Lilia Smirnova <lilia.pro@protonmail.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport {call as fetchMany} from 'core/ajax';\r\nimport ModalFactory from 'core/modal_factory';\r\nimport ModalEvents from 'core/modal_events';\r\nimport jQuery from 'jquery';\r\n\r\nconst local_wsmanager_webservice_tokens_table_output = (webserviceid) => {\r\n    fetchMany([{\r\n        methodname: 'local_wsmanager_webservice_tokens_table_output',\r\n        args: {\r\n            webserviceid: webserviceid\r\n        },\r\n    }])[0].then(function (res) {\r\n        jQuery('#local_wsmanager_webservice_tokens_table_' + webserviceid).html(res);\r\n    });\r\n};\r\nconst local_wsmanager_functions_table_output = (webserviceid) => {\r\n    fetchMany([{\r\n        methodname: 'local_wsmanager_webservice_functions_table_output',\r\n        args: {\r\n            webserviceid: webserviceid\r\n        },\r\n    }])[0].then(function (res) {\r\n        jQuery('#local_wsmanager_webservice_functions_table_' + webserviceid).html(res);\r\n    });\r\n};\r\n\r\nexport const init = (sep1, sep2, sep3, sep4) => {\r\n    var anchor = window.location.hash.substring(1);\r\n    if (anchor) {\r\n        switch (anchor) {\r\n            case 'create_webservice_form':\r\n                jQuery('#local_wsmanager_create_webservice_form').show();\r\n                jQuery('#local_wsmanager_create_webservice_form_show').addClass('opened');\r\n                break;\r\n        }\r\n    }\r\n    jQuery('body')\r\n        .on('click', '.local_wsmanager_tab_link', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                webserviceid = $this.data('webserviceid');\r\n            jQuery('.local_wsmanager_tab_link').removeClass('active');\r\n            $this.addClass('active');\r\n            jQuery('.local_wsmanager_webservice_data_output').hide();\r\n            jQuery('#local_wsmanager_webservice_data_output_' + webserviceid).show();\r\n            return false;\r\n        })\r\n        .on('click', '#local_wsmanager_create_webservice_form_show', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this);\r\n            if (!$this.hasClass('opened')) {\r\n                jQuery('#local_wsmanager_create_webservice_form').show();\r\n                $this.addClass('opened');\r\n            } else {\r\n                jQuery('#local_wsmanager_create_webservice_form').hide();\r\n                $this.removeClass('opened');\r\n            }\r\n            return false;\r\n        })\r\n        .on('submit', '#local_wsmanager_create_webservice_form form', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                data = {},\r\n                formData = $this.serializeArray();\r\n            if (formData) {\r\n                jQuery.each(formData, function (i, item) {\r\n                    if (item.name) {\r\n                        switch (item.name) {\r\n                            case 'sesskey':\r\n                                data.sesskey = item.value;\r\n                                break;\r\n                            case '_qf__local_wsmanager_webservice_form':\r\n                                data._qf__local_wsmanager_webservice_form = parseInt(item.value);\r\n                                break;\r\n                            case 'name':\r\n                                data.name = item.value;\r\n                                break;\r\n                            case 'shortname':\r\n                                data.shortname = item.value;\r\n                                break;\r\n                            case 'enabled':\r\n                                data.enabled = parseInt(item.value);\r\n                                break;\r\n                            case 'restrictedusers':\r\n                                data.restrictedusers = parseInt(item.value);\r\n                                break;\r\n                            case 'downloadfiles':\r\n                                data.downloadfiles = parseInt(item.value);\r\n                                break;\r\n                            case 'uploadfiles':\r\n                                data.uploadfiles = parseInt(item.value);\r\n                                break;\r\n                            case 'requiredcapability':\r\n                                data.requiredcapability = item.value;\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n                jQuery.post(\r\n                    M.cfg.wwwroot + '/local/wsmanager/webservices.php',\r\n                    data,\r\n                    function (response) {\r\n                        if (response.success) {\r\n                            fetchMany([{\r\n                                methodname: 'local_wsmanager_webservice_create',\r\n                                args: {\r\n                                    name: data.name,\r\n                                    shortname: data.shortname,\r\n                                    enabled: data.enabled,\r\n                                    restrictedusers: data.restrictedusers,\r\n                                    downloadfiles: data.downloadfiles,\r\n                                    uploadfiles: data.uploadfiles,\r\n                                    requiredcapability: data.requiredcapability,\r\n                                },\r\n                            }])[0].then(function (res) {\r\n                                if (res.errors.length === 0 && res.errors.webservice) {\r\n                                    window.location.replace(jQuery('#local_wsmanager_url').val());\r\n                                }\r\n                            });\r\n                        }\r\n                    },\r\n                    'json'\r\n                );\r\n            }\r\n            return false;\r\n        })\r\n        .on('click', '#local_wsmanager_create_webservice_form [name=\"cancel\"]', function (event) {\r\n            event.preventDefault();\r\n            jQuery('#local_wsmanager_create_webservice_form').hide();\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_token_create_form_button', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                webserviceid = $this.data('webserviceid');\r\n            jQuery('#local_wsmanager_webservice_token_create_form_wrapper_' + webserviceid).show();\r\n            $this.hide();\r\n            return false;\r\n        })\r\n        .on('submit', '.local_wsmanager_webservice_token_create_form', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                data = {\r\n                    valid_until: {}\r\n                },\r\n                formData = $this.serializeArray();\r\n            if (formData) {\r\n                jQuery.each(formData, function (i, item) {\r\n                    if (item.name) {\r\n                        switch (item.name) {\r\n                            case 'webserviceid':\r\n                                data.webserviceid = parseInt(item.value);\r\n                                break;\r\n                            case 'sesskey':\r\n                                data.sesskey = item.value;\r\n                                break;\r\n                            case '_qf__local_wsmanager_token_form':\r\n                                data._qf__local_wsmanager_token_form = parseInt(item.value);\r\n                                break;\r\n                            case 'user':\r\n                                data.user = parseInt(item.value);\r\n                                break;\r\n                            case 'iprestriction':\r\n                                data.iprestriction = jQuery.trim(item.value);\r\n                                break;\r\n                            case 'validuntil[enabled]':\r\n                                data.validUntilEnabled = true;\r\n                                break;\r\n                            case 'validuntil[day]':\r\n                                data.valid_until.day = parseInt(item.value);\r\n                                break;\r\n                            case 'validuntil[month]':\r\n                                data.valid_until.month = parseInt(item.value);\r\n                                break;\r\n                            case 'validuntil[year]':\r\n                                data.valid_until.year = parseInt(item.value);\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n                if (!data.validUntilEnabled) {\r\n                    data.valid_until = {};\r\n                }\r\n                jQuery.post(\r\n                    M.cfg.wwwroot + '/local/wsmanager/webservices.php',\r\n                    data,\r\n                    function (response) {\r\n                        if (response.success) {\r\n                            fetchMany([{\r\n                                methodname: 'local_wsmanager_webservice_token_create',\r\n                                args: {\r\n                                    webserviceid: data.webserviceid,\r\n                                    userid: data.user,\r\n                                    iprestriction: data.iprestriction,\r\n                                    valid_until: data.valid_until,\r\n                                },\r\n                            }])[0].then(function (res) {\r\n                                if (res.id) {\r\n                                    local_wsmanager_webservice_tokens_table_output(data.webserviceid);\r\n                                }\r\n                            });\r\n                        }\r\n                    },\r\n                    'json'\r\n                );\r\n            }\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_token_create_form_wrapper [name=\"cancel\"]', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                parent = $this.closest('.local_wsmanager_webservice_token_create_form_wrapper'),\r\n                webserviceid = 0;\r\n            if (parent) {\r\n                webserviceid = parent.data('webserviceid');\r\n                jQuery('#local_wsmanager_webservice_token_create_form_button_' + webserviceid).show();\r\n                jQuery('#local_wsmanager_webservice_token_create_form_wrapper_' + webserviceid).hide();\r\n            }\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_token_delete', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                webserviceid = parseInt($this.data('webserviceid')),\r\n                tokenid = parseInt($this.data('tokenid')),\r\n                token = $this.data('token');\r\n            if (tokenid) {\r\n                ModalFactory.create({\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    title: M.str.webservice.deletetoken,\r\n                    body: M.str.webservice.deletetoken + ' <strong>' + token + '</strong><br />' +\r\n                        M.str.moodle.areyousure\r\n                }).then(function (modal) {\r\n                    modal.setButtonText('save', M.str.moodle.delete);\r\n                    modal.getRoot().on(ModalEvents.save, function (e) {\r\n                        e.preventDefault();\r\n                        fetchMany([{\r\n                            methodname: 'local_wsmanager_webservice_token_delete',\r\n                            args: {\r\n                                tokenid: tokenid,\r\n                            },\r\n                        }])[0].then(function (response) {\r\n                            local_wsmanager_webservice_tokens_table_output(webserviceid);\r\n                        });\r\n                        modal.hide();\r\n                    });\r\n                    modal.getRoot().on(ModalEvents.cancel, function () {\r\n                        modal.hide();\r\n                    });\r\n                    modal.show();\r\n                });\r\n            }\r\n\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_functions_add_form_button', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                webserviceid = $this.data('webserviceid');\r\n            jQuery('#local_wsmanager_webservice_functions_add_form_wrapper_' + webserviceid).show();\r\n            $this.hide();\r\n            return false;\r\n        })\r\n        .on('submit', '.local_wsmanager_webservice_functions_add_form', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                fids = [],\r\n                webserviceid = $this.data('webserviceid'),\r\n                formData = $this.serializeArray();\r\n            if (formData) {\r\n                jQuery.each(formData, function (i, item) {\r\n                    if (item.name) {\r\n                        switch (item.name) {\r\n                            case 'fids_' + webserviceid + '[]':\r\n                                fids.push(parseInt(item.value));\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n                if (fids.length) {\r\n                    jQuery.each(fids, function (i, fid) {\r\n                        fetchMany([{\r\n                            methodname: 'local_wsmanager_webservice_function_add',\r\n                            args: {\r\n                                functionid: fid,\r\n                                webserviceid: webserviceid,\r\n                            },\r\n                        }])[0].then(function (response) {\r\n                            local_wsmanager_functions_table_output(webserviceid);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_functions_add_form_wrapper [name=\"cancel\"]', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                parent = $this.closest('.local_wsmanager_webservice_functions_add_form_wrapper'),\r\n                webserviceid = 0;\r\n            if (parent) {\r\n                webserviceid = parent.data('webserviceid');\r\n                jQuery('#local_wsmanager_webservice_functions_add_form_button_' + webserviceid).show();\r\n                jQuery('#local_wsmanager_webservice_functions_add_form_wrapper_' + webserviceid).hide();\r\n            }\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_function_delete', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                webserviceid = parseInt($this.data('webserviceid')),\r\n                functionid = parseInt($this.data('functionid')),\r\n                functionname = $this.data('functionname');\r\n            if (webserviceid && functionid && functionname) {\r\n                ModalFactory.create({\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    title: M.str.webservice.removefunction,\r\n                    body: M.str.webservice.removefunction + ' <strong>' + functionname + '</strong><br />' +\r\n                        M.str.moodle.areyousure\r\n                }).then(function (modal) {\r\n                    let root = modal.getRoot();\r\n                    modal.setButtonText('save', M.str.moodle.remove);\r\n                    root.on(ModalEvents.save, function (e) {\r\n                        e.preventDefault();\r\n                        fetchMany([{\r\n                            methodname: 'local_wsmanager_webservice_function_delete',\r\n                            args: {\r\n                                functionid: functionid,\r\n                                webserviceid: webserviceid,\r\n                            },\r\n                        }])[0].then(function (response) {\r\n                            local_wsmanager_functions_table_output(webserviceid);\r\n                        });\r\n                        modal.hide();\r\n                    });\r\n                    root.on(ModalEvents.cancel, function () {\r\n                        modal.hide();\r\n                    });\r\n                    modal.show();\r\n                });\r\n            }\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_delete', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                webserviceid = parseInt($this.data('webserviceid')),\r\n                name = $this.data('name');\r\n            if (webserviceid) {\r\n                ModalFactory.create({\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    title: M.str.webservice.deleteaservice,\r\n                    body: M.str.webservice.deleteaservice + ' ' + name + '<br />' + M.str.moodle.areyousure\r\n                }).then(function (modal) {\r\n                    let root = modal.getRoot();\r\n                    modal.setButtonText('save', M.str.moodle.delete);\r\n                    root.on(ModalEvents.save, function (e) {\r\n                        e.preventDefault();\r\n                        fetchMany([{\r\n                            methodname: 'local_wsmanager_webservice_delete',\r\n                            args: {\r\n                                webserviceid: webserviceid,\r\n                            },\r\n                        }])[0].then(function (response) {\r\n                            window.location.replace(jQuery('#local_wsmanager_url').val());\r\n                        });\r\n                        modal.hide();\r\n                    });\r\n                    root.on(ModalEvents.cancel, function () {\r\n                        modal.hide();\r\n                    });\r\n                    modal.show();\r\n                });\r\n            }\r\n\r\n            return false;\r\n        })\r\n        .on('click', '.local_wsmanager_webservice_user_delete', function (event) {\r\n            event.preventDefault();\r\n            var $this = jQuery(this),\r\n                webserviceid = parseInt($this.data('webserviceid')),\r\n                userid = $this.data('userid');\r\n\r\n            if (webserviceid && userid) {\r\n                ModalFactory.create({\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    title: M.str.admin.deleteuser,\r\n                    body: M.str.moodle.areyousure\r\n                }).then(function (modal) {\r\n                    let root = modal.getRoot();\r\n                    modal.setButtonText('save', M.str.moodle.delete);\r\n                    root.on(ModalEvents.save, function (e) {\r\n                        e.preventDefault();\r\n                        fetchMany([{\r\n                            methodname: 'local_wsmanager_webservice_user_delete',\r\n                            args: {\r\n                                webserviceid: webserviceid,\r\n                                userid: userid,\r\n                            },\r\n                        }])[0].then(function (response) {\r\n                            var cnt = jQuery('.local_wsmanager_webservice_user_row_' +\r\n                                webserviceid).length;\r\n                            if (response) {\r\n                                jQuery('#local_wsmanager_webservice_user_row_' +\r\n                                    webserviceid + '_' + userid).remove();\r\n                                if (cnt === 1) {\r\n                                    jQuery('#local_wsmanager_webservice_users_table_' + webserviceid)\r\n                                        .remove();\r\n                                }\r\n                            }\r\n                        });\r\n                        modal.hide();\r\n                    });\r\n                    root.on(ModalEvents.cancel, function () {\r\n                        modal.hide();\r\n                    });\r\n                    modal.show();\r\n                });\r\n            }\r\n            return false;\r\n        });\r\n};"],"names":["local_wsmanager_webservice_tokens_table_output","webserviceid","methodname","args","then","res","html","local_wsmanager_functions_table_output","sep1","sep2","sep3","sep4","anchor","window","location","hash","substring","show","addClass","on","event","preventDefault","$this","this","data","removeClass","hide","hasClass","formData","serializeArray","each","i","item","name","sesskey","value","_qf__local_wsmanager_webservice_form","parseInt","shortname","enabled","restrictedusers","downloadfiles","uploadfiles","requiredcapability","post","M","cfg","wwwroot","response","success","errors","length","webservice","replace","val","valid_until","_qf__local_wsmanager_token_form","user","iprestriction","jQuery","trim","validUntilEnabled","day","month","year","userid","id","parent","closest","tokenid","token","create","type","ModalFactory","types","SAVE_CANCEL","title","str","deletetoken","body","moodle","areyousure","modal","setButtonText","delete","getRoot","ModalEvents","save","e","cancel","fids","push","fid","functionid","functionname","removefunction","root","remove","deleteaservice","admin","deleteuser","cnt"],"mappings":"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"}